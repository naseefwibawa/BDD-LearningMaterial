## Background Story

In Behavior Driven Development (BDD), behavior scenarios are crucial. A behavior scenario represents a specific action or behavior of a product or feature, and it's documented in a structured way. This documentation serves as both the requirement and the test case for that particular behavior.

To put it simply, a behavior scenario is a way of describing how a feature should behave in different situations. It's a clear and concise way of documenting the requirements for a feature or product, as well as providing test cases to ensure that the feature functions as intended.

Think of a behavior scenario as a step-by-step guide to test a feature or product, written in plain English. By using scenarios to define and test behavior, BDD helps ensure that developers and stakeholders are on the same page and that the product is built to meet the expected requirements.

In summary, behavior scenarios are an essential part of BDD that help to ensure that products and features meet requirements and are thoroughly tested. They are a clear and structured way to document how a feature should behave in different situations, and serve as both requirements and test cases.

## How Gherkin Language Simplifies Writing and Testing of Product Behaviors

Gherkin is a domain-specific language that is used to write behavior scenarios in BDD. It's a simple programming language that is written into feature files with a ".feature" extension. Gherkin scenarios are designed to be written in plain English and are short in length.

Cucumber, one of the most commonly used BDD automation frameworks, maintains the official Gherkin language standard. While most other BDD frameworks also use Gherkin, some may not adhere to Cucumber's language standards entirely.

Each Gherkin scenario follows a standard structure consisting of three parts - Given, When, and Then. This structure is used to define the initial state, the action taken, and the outcome verification of a particular behavior or feature.

1. The Given section describes the initial state of the system before the action is taken. It sets up the context for the scenario.
2. The When section describes the action that is taken in the scenario.
3. The Then section describes the expected outcome or result of the scenario.

By using this standard structure, Gherkin scenarios provide a clear and consistent way to document and test behaviors in BDD. Writing scenarios in plain English makes them more accessible to both technical and non-technical stakeholders, ensuring that everyone can understand the expected behavior of a feature or product.

A feature file is a text file written in Gherkin that contains one or more scenarios. Each scenario represents a single behavior of a product or feature. Feature files are used to document the expected behavior of a feature in a clear and structured way that is accessible to both technical and non-technical stakeholders.

A basic example of a feature file is shown below, with the Gherkin keywords in bold:

![In this example, the feature file describes the behavior of searching for a user on a User Page CMS. The file consists of one scenario, which is structured using the Given, When, and Then keywords.](source\2023-05-11_16h42_58.png)

In this example, the feature file describes the behavior of searching for a user on a User Page CMS. The file consists of one scenario, which is structured using the Given, When, and Then keywords.

The scenario starts with the **Given** keyword, which defines the initial state of the scenario. In this case, the user is logged in to the CMS and has opened the User Page CMS.

The **When** keyword is used to describe the action that is taken in the scenario. In this case, the user enters "admin" in the user search field.

The **Then** keyword is used to define the expected outcome of the scenario. In this case, the search results for "admin" are displayed.

Using Gherkin feature files with clear and concise scenarios like this helps ensure that all stakeholders are on the same page and that the product is built to meet the expected requirements.

The **Feature** section of a scenario includes a title and a description, which are only used for documentation purposes. If a feature is tied to an Agile user story, it's best practice to include the user story in the description. The Feature section also includes one or more Scenario sections, each with a unique title.

A scenario typically starts with a Given step, which sets up the expected state before the main actions take place. The When step contains the actions for exercising the behavior under test, and the Then step verifies that the behavior was successful. The description of each step, written by the test author, is linked to a step definition in the automation codebase using string or regular expression matching. It's important to note that feature files apart from step definitions are essentially manual test case procedures.

Gherkin is the domain-specific language used to write behavior scenarios. It's a simple programming language and its "code" is written into feature files with a ".feature" extension. The official Gherkin language standard is maintained by Cucumber, one of the most popular BDD automation frameworks. While most other BDD frameworks use Gherkin, some may not conform entirely to Cucumber's language standards.

The idea is to make scenarios short and readable for anyone, regardless of their technical background.

## Gherkin Keywords

Gherkin, like every other programming language, has its own set of keywords that are used to write behavior scenarios. These keywords are defined in the official Gherkin language, but it's **important** to note that not all BDD frameworks follow the same standards. Cucumber, a popular BDD automation framework, maintains the official Gherkin language reference for its implementation.

The table below provides an overview of each Gherkin keyword and its usage in the official language:

| Keyword          | Purpose                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Feature          | A section denoting the product or feature under test. It contains a one-line title and can have extra lines for description, which should include the user story. A Feature section may have one Background section and multiple Scenario and Scenario Outline sections. It is recommended to have one Feature per feature file.                                                                                                                                                                                                                    |
| Scenario         | A section for defining a specific behavior scenario. It typically contains a one-line title and multiple Given, When, and Then steps that describe the behavior. Each type of step is optional, but the step order matters. Each scenario should be independent of other scenarios.                                                                                                                                                                                                                                                                 |
| Given            | Defines the preconditions or initial state of the behavior being tested. It should put the product under test into the desired state. The Given step may be parameterized, allowing the same step to be reused with different input values.                                                                                                                                                                                                                                                                                                         |
| When             | Used to define an action to be performed. This step may be parameterized to specify the details of the action. For example, "When I enter my username and password and click the login button" is a valid "When" step that specifies the action of logging into a system. The parameters in this step are "username" and "password".                                                                                                                                                                                                                |
| Then             | A step to define the expected result from the action taken by the preceding When step. The Then step may be parameterized to make the expected result more specific.                                                                                                                                                                                                                                                                                                                                                                                |
| And              | The keyword "And" is used to add an additional step to a Given, When, or Then. It is used instead of repeating Given, When, or Then for brevity. For example, Given-Given-When-Then can be simplified to Given-And-When-Then. "And" is associated with the immediately preceding step and should be used when the relationship between steps is clear. The order of steps is important and must follow the Given → When → Then sequence.                                                                                                            |
| But              | Functions the same as And, but may be used when the second clause contrasts with the first                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Background       | The "background" keyword is used to define a section of "Given" and "And" statements that are to be executed before each scenario in a feature file. This section does not have a title or description and there can only be one "background" section for each "feature" section. The purpose of the "background" section is to reduce repetition in the scenarios and to set up the initial state for the scenarios to run.                                                                                                                        |
| Scenario Outline | A Scenario Outline is a templated scenario section that allows you to create reusable test cases. It uses placeholders, identified by angle brackets "<" and ">", to represent parameter names. The Scenario Outline is followed by an Examples table that provides parameter values to fill in the placeholders. You can have multiple Examples tables to test different scenarios. During test execution, the placeholders are replaced with the provided parameter values. This allows you to test the same behavior with different data inputs. |
| Examples         | A table of parameter values for a Scenario Outline, with each row representing a combination of values to test together. It may have any positive number of rows.                                                                                                                                                                                                                                                                                                                                                                                   |
| pipe symbol      | The pipe symbol is a delimiter used for Examples tables and step tables in Gherkin. If you want to use the pipe character as text within a column, use the escape sequence pipe symbol. This will ensure that the pipe character is not interpreted as a delimiter.                                                                                                                                                                                                                                                                                 |
| “””              | To define a doc string delimiter for passing large text into a step. Doc strings may be multi-line.                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| @                | The "@" symbol is used as a prefix to indicate a tag. Tags may be placed before Feature or Scenario sections in a Gherkin file. Tags are used to filter scenarios, allowing users to group and organize them in meaningful ways. For example, tags could be used to mark scenarios as "smoke tests" or "regression tests." When running tests, users can specify which tags they want to include or exclude.                                                                                                                                        |
| #                | The # symbol is used as the prefix for a comment line in Gherkin. Comments are not processed by the Gherkin parser and are used to provide additional information or context about the feature file.                                                                                                                                                                                                                                                                                                                                                |
